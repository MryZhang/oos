<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html lang="de"> 
  <head> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8"> 
    <title>Open Object Store</title> 
		<link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" type="text/css" href="solarized_light.css">
  </head> 
<body>
  <div id="wrapper">
    <div id="header">
      <ul>
        <li>Home</li>
        <li><a href="api/index.html">Documention</a></li>
        <li><a href="download.html">Download</a></li>
        <li><a href="tutorial.html">Tutorial</a></li>
        <li><a href="about.html">About</a></li>
      </ul>
    </div>
    <div id="content">
      <div class="width66 float_left">
        <p>Open Object Store (OOS) is an open source and cross-plattform C++ framework for object-relational mapping (ORM). It provides a container for all kind of your objects with the ability to persist these objects.</p>
        <p>You don't have to deal with tables, columns neither with creating sql statements at all. All is done for you automagically. It gives the user both one container for all objects and the persistence backend functionality.</p>
        <p>The following class demonstrates how your classes have to look like within your code while working with OOS:</p>
<pre><code class="cpp"><span class="preprocessor">#include "object/object.hpp"</span>

<span class="keyword">class</span> person : <span class="keyword">public</span> oos::object
{
<span class="keyword">public</span>:
  <span class="built_in">std</span>::<span class="built_in">string</span> name;
  <span class="keyword">int</span> age;

<span class="keyword">public</span>:
  person(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;n, <span class="keyword">int</span> a)
    : name(n), age(a)
  {}
  <span class="keyword">virtual</span> ~person() {}
  
  <span class="keyword">virtual</span> read_from(oos::object_atomizer *oa)
  {
    oos::object::read_from(oa);
    oa-&gt;read_string(<span class="string">"name"</span>, name);
    oa-&gt;read_int(<span class="string">"age"</span>, age);
  }

  <span class="keyword">virtual</span> <span class="keyword">void</span> write_to(object_atomizer *oa) <span class="keyword">const</span>
  {
    oos::object::write_to(oa);
    oa-&gt;write_string(<span class="string">"name"</span>, name);
    oa-&gt;write_int(<span class="string">"age"</span>, age);
  }
};</code></pre>
        <p>As you can see, the class is only derived from oos::object and two serialize methods are added. Thats it! The following code snippet shows how we can creete a database and use a transaction to persist some objects. But first the class person must be made known to the object store.</p>
<pre><code class="cpp"><span class="preprocessor">#include "object/object_store.hpp"</span>
<span class="preprocessor">#include "object/object_ptr.hpp"</span>
<span class="preprocessor">#include "object/object_view.hpp"</span>
<span class="preprocessor">#include "database/database.hpp"</span>
<span class="preprocessor">#include "database/transaction.hpp"</span>

<span class="preprocessor">#include &lt;iostream&gt;</span>

<span class="keyword">using</span> <span class="keyword">namespace</span> oos;

<span class="keyword">int</span> main(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])
{
  object_store ostore;
  ostore.insert_prototype&lt;person&gt;(<span class="string">"person"</span>);

  database db(ostore, <span class="string">"sqlite://person.db"</span>);
  
  db.load();
  
  transaction tr(db);

  <span class="keyword">try</span> {  
    tr.begin();

    ostore.insert(<span class="keyword">new</span> person(<span class="string">"George"</span>, <span class="number">45</span>));
    ostore.insert(<span class="keyword">new</span> person(<span class="string">"Jane"</span>, <span class="number">38</span>));
    ostore.insert(<span class="keyword">new</span> person(<span class="string">"Tim"</span>, <span class="number">23</span>));
    ostore.insert(<span class="keyword">new</span> person(<span class="string">"Walter"</span>, <span class="number">57</span>));
    
    tr.commit();
  } <span class="keyword">catch</span> (exception&amp;) {
    tr.rollback();
    exit(<span class="number">1</span>);
  }

  <span class="keyword">typedef</span> object_ptr&lt;person&gt; person_ptr;
  <span class="keyword">typedef</span> object_view&lt;person&gt; person_view_t;

  person_view_t oview(ostore);
  
  person_view_t::iterator i = oview.begin();
  person_view_t::iterator last = oview.end();
  <span class="keyword">for</span> (; i != last; ++i) {
    person_ptr p = *i;
    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"person: "</span> &lt;&lt; p-&gt;name &lt;&lt; <span class="string">"\n"</span>;
  }
  
  <span class="keyword">return</span> <span class="number">0</span>;
}
</code></pre>      </div>
      <div class="width33 float_right">
        <p>Download Version 0.1 here.</p>
      </div>
    </div>
    <div class="clear" id="footer">
  Infos.
    </div>
  </body>
</html>
