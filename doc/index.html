<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html lang="de"> 
  <head> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
    <title>Open Object Store</title> 
	<link rel="stylesheet" type="text/css" href="style.css" />
    <!--link rel="stylesheet" type="text/css" href="vs.css"/-->
    <link rel="stylesheet" type="text/css" href="solarized_light.css"/>
  </head> 
  <body>
    <div id="wrapper">
      <div id="header">
        <ul>
          <li>Home</li>
          <li><a href="api/index.html">Documention</a></li>
          <li><a href="download.html">Download</a></li>
          <li><a href="tutorial.html">Tutorial</a></li>
          <li><a href="about.html">About</a></li>
        </ul>
      </div>
      <div id="content">
        <h2>OOS: The Open Object Store</h2>
        <div class="width66 float_left">
          <p>Open Object Store (OOS) is an open source and cross-plattform C++ framework for object-relational mapping (ORM). It provides two things the ORM funcionality and a container for all kind of your objects with the ability to persist these objects. You don't have to deal with tables, columns neither with creating sql statements at all. All is done for you automagically. It gives the user both one container for all objects and the persistence backend functionality.</p>
          <h2>Getting started</h2>
        </div>
        <div class="width33 float_right">
            <p>Download Version 0.1 here.</p>
        </div>
        <div class="clear"></div>
        <div class="width100 float_left">
          <p>The following code should give you a brief overview how you design your object classes to integrate within OOS and how you can access your objects inserted into the object store.</p>
        </div>
        <div class="clear"></div>
        <div class="width50 float_left">
          <p>1. Create your class derived from oos::object add access methods and overwrite the serialization interface.</p>
<pre><code class="cpp"><span class="keyword">class</span> person : <span class="keyword">public</span> oos::object
{
<span class="keyword">private</span>:
  <span class="built_in">std</span>::<span class="built_in">string</span> name_;
  <span class="built_in">int</span> age_;

<span class="keyword">public</span>:
  person() : age_(0) {}
  person(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;n, <span class="built_in">int</span> a)
    : name_(n), age_(a)
  {}
  <span class="keyword">virtual</span> ~person() {}
  
  <span class="keyword">virtual</span> <span class="keyword">void</span> read_from(oos::object_atomizer *a)
  {
    oos::object::read_from(a);
    a-&gt;read_string(<span class="string">"name"</span>, name_);
    a-&gt;read_int(<span class="string">"age"</span>, age_);
  }

  <span class="keyword">virtual</span> <span class="keyword">void</span> write_to(oos::object_atomizer *a) <span class="keyword">const</span>
  {
    oos::object::write_to(a);
    a-&gt;write_string(<span class="string">"name"</span>, name_);
    a-&gt;write_int(<span class="string">"age"</span>, age_);
  }

  <span class="keyword">void</span> name(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">string</span> &amp;n)
  {
    modify(name_, n);
  }

  <span class="keyword">void</span> age(<span class="built_in">int</span> a)
  {
    modify(age_, a);
  }

  <span class="built_in">std</span>::<span class="built_in">string</span> name() <span class="keyword">const</span> { <span class="keyword">return</span> name_; }
  <span class="built_in">int</span> age() <span class="keyword">const</span> { <span class="keyword">return</span> age_; }
};</code></pre>
        </div>
        <div class="width50 float_right">
        <p>2. Make your class type known to your object store</p>
<pre><code class="cpp">object_store ostore;
ostore.insert_prototype&lt;person&gt;(<span class="string">"person"</span>);</code></pre>
        <p>3. Create a new session start a new transaction and insert your objects.</p>
<pre><code class="cpp">session db(ostore, <span class="string">"sqlite://person.db"</span>);

db.create();

transaction tr(db);

<span class="keyword">try</span> {  
    tr.begin();

    ostore.insert(<span class="keyword">new</span> person(<span class="string">"George"</span>));
    ostore.insert(<span class="keyword">new</span> person(<span class="string">"Jane"</span>));
    ostore.insert(<span class="keyword">new</span> person(<span class="string">"Tim"</span>));
    ostore.insert(<span class="keyword">new</span> person(<span class="string">"Walter"</span>));

    tr.commit();
} <span class="keyword">catch</span> (exception&amp;) {
    <span class="comment">// do your cleanup here</span>
    tr.rollback();
}</code></pre>
        <p>4. To access your objects open a view.</p>
<pre><code class="cpp"><span class="keyword">typedef</span> object_ptr&lt;person&gt; person_ptr;
<span class="keyword">typedef</span> object_view&lt;person&gt; person_view_t;

person_view_t oview(ostore);

person_view_t::iterator i = oview.begin();
person_view_t::iterator last = oview.end();
<span class="keyword">for</span> (; i != last; ++i) {
    person_ptr p = *i;
    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"person: "</span> &lt;&lt; p-&gt;name() &lt;&lt; <span class="string">"\n"</span>;
}
</code></pre>
      </div>
      <div class="width100 float_left">
        <p>As you can see, the class is only derived from oos::object and two serialize methods are added. Thats it! The following code snippet shows how we can creete a database and use a transaction to persist some objects. But first the class person must be made known to the object store.</p>
      </div>
    </div>
    <div id="footer">
Infos.
    </div>
  </div>
  </body>
</html>
