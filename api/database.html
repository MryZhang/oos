<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html lang="de"> 
  <head> 
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
    <title>Open Object Store</title> 
  	<link rel="stylesheet" type="text/css" href="style.css" />
  </head> 
  <body>
    <div id="header">
      <a href="https://github.com/zussel/oos"><img style="z-order: 10000; float: left; top: 0; left: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_left_green_007200.png" alt="Fork me on GitHub"></a>
      <div id="navigation">
        <h1>OOS</h1>
        <p>Store all your objects in one container</p>
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li class="selected">Documention</li>
          <li><a href="../download.html">Download</a></li>
          <li><a href="../contact.html">Contact</a></li>
          <li><a href="../about.html">About</a></li>
        </ul>
      </div>
    </div>
    <div id="wrapper">
      <!--div id="header">
        <ul>
          <li><a href="../index.html">Home</a></li>
          <li class="selected">Documention</li>
          <li><a href="../download.html">Download</a></li>
          <li><a href="../tutorial.html">Tutorial</a></li>
          <li><a href="../about.html">About</a></li>
        </ul>
        <div id="logo">
          <table cellspacing="0">
            <tr>
              <td class="oos">OOS</td>
              <td class="tagline">Store all your objects in one container.</td>
            </tr>
          </table>
        </div>
      </div-->
      <div id="content">
        <div>
<!-- Generated by Doxygen 1.8.3 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="annotated.html"><span>Documentation</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Persist Objects </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"> 
<div class="width75 float_left">
 
<table id="doc_nav"><tbody><tr>
  <td align="left" width="40%">
 <a class="el" href="expressions.html">Expressions</a>  
  </td>
  <td width="20%"></td>
  <td align="right" width="40%">
  
  </td>
</tr></tbody></table>
<h1><a class="anchor" id="database_sec"></a>
Persist Objects</h1>
<p>When it comes to persistence you have to deal with sessions and transactions. You have to create a session for a specific database and wrap a transaction around your insertions or modifications.</p>
<p>After created a session objects youo can either create the database schema ...</p>
<div class="fragment"><div class="line"><span class="comment">// create and open a session</span></div>
<div class="line"><a class="code" href="classoos_1_1session.html" title="Frontend class to make the objects persistent.">oos::session</a> ses(<span class="stringliteral">&quot;sqlite://person.db&quot;</span>);</div>
<div class="line"></div>
<div class="line"><span class="comment">// create the database schema</span></div>
<div class="line">ses.create();</div>
</div><!-- fragment --><p>... or load the data from database.</p>
<div class="fragment"><div class="line"><span class="comment">// load the data from database</span></div>
<div class="line">ses.load();</div>
</div><!-- fragment --><p>Once the schema is created or the data is loaded you can start and insert, update or delete your data. Therefor create a transaction object with the current session and start the transaction by calling <a class="el" href="classoos_1_1transaction.html#a799e096658e74fd29944d895847b6193" title="Start the transaction.">oos::transaction::begin()</a>. After completing your modifications call <a class="el" href="classoos_1_1transaction.html#a3b7de532a0981a71e0c90e43e0502517" title="Commit the started transaction.">oos::transaction::commit()</a> to commit all your modifications to the database. If in error occurred while doing your modifications catch the exception. In the catch block you can call <a class="el" href="classoos_1_1transaction.html#a6a782aaa33242b3212c8cff17ea52a94" title="Abort and rollback the started transaction.">oos::transaction::rollback()</a> to rollback all your modifications.</p>
<div class="fragment"><div class="line"><span class="comment">// create a transaction for session</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="classoos_1_1transaction.html" title="The transaction class.">oos::transaction</a> tr(ses);</div>
<div class="line"><span class="keywordflow">try</span> {</div>
<div class="line">  <span class="comment">// begin the transaction</span></div>
<div class="line">  tr.begin();</div>
<div class="line"></div>
<div class="line">  <span class="comment">// insert some objects</span></div>
<div class="line">  ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;joe&quot;</span>, 45))</div>
<div class="line">  ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;walter&quot;</span>, 56));</div>
<div class="line">  ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;helen&quot;</span>, 37));</div>
<div class="line">  ostore.<a class="code" href="classoos_1_1object__store.html#a77514ee78979a91d2745f01184371e11">insert</a>(<span class="keyword">new</span> person(<span class="stringliteral">&quot;tim&quot;</span>, 14));</div>
<div class="line"></div>
<div class="line">  <span class="comment">// commit the modifications</span></div>
<div class="line">  tr.commit();</div>
<div class="line">} <span class="keywordflow">catch</span> (exception &amp;ex) {</div>
<div class="line">  <span class="comment">// on error rollback transactions</span></div>
<div class="line">  tr.rollback();</div>
<div class="line">}</div>
</div><!-- fragment --> 
<table id="doc_nav"><tbody><tr>
  <td align="left" width="40%">Prev</td>
  <td align="center" width="20%"></td>
  <td align="right" width="40%"></td></tr><tr>
  <td align="left" width="40%">
 <a class="el" href="expressions.html">Expressions</a>  
  </td>
  <td width="20%"></td>
  <td align="right" width="40%">
  
  </td>
</tr></tbody></table>
 
</div>
<div id="side_toc" class="width25 float_right">
 <b>Table of content</b> <br/>
 </p>
<ul>
<li>
<a class="el" href="index.html">Introduction</a> <ul>
<li>
<a class="el" href="index.html#intro_sec">Overview</a></li>
</ul>
</li>
<li>
<a class="el" href="store.html">The ObjectStore</a> <ul>
<li>
<a class="el" href="store.html#objects_sec">Objects</a> </li>
<li>
<a class="el" href="store.html#object_store_sec">Object Store</a> <ul>
<li>
<a class="el" href="store.html#prototypes">Setup object hierarchy</a> </li>
<li>
<a class="el" href="store.html#add_objects">Add objects</a> </li>
<li>
<a class="el" href="store.html#modify_objects">Modify objects</a> </li>
<li>
<a class="el" href="store.html#remove_objects">Remove objects</a> </li>
</ul>
</li>
</ul>
</li>
<li>
<a class="el" href="relations.html">Object Relations</a> </li>
<li>
<a class="el" href="view.html">Object Views</a> <ul>
<li>
<a class="el" href="relations.html#one_to_one">OneToOne relations</a> </li>
<li>
<a class="el" href="relations.html#one_to_many">OneToMany relations</a> </li>
</ul>
</li>
<li>
<a class="el" href="expressions.html">Expressions</a> </li>
<li>
<a class="el" href="database.html">Persist Objects</a> </li>
</ul>
 
</div>
 </div></div><!-- contents -->
    <div class="clear" id="footer"></div>
  </div>
</body>
</html>
